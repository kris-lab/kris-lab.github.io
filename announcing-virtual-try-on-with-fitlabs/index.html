<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Future of AI driven Virtual Try-On - __Chris_Stasiak__</title><meta name="description" content="Since the beginning of summer 2020, I'm involved in a pretty unique project in the area of the fashion industry. To be more specific, it's the technology for supporting the virtual try-on for both: online and offline shopping! You might&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://blog.kris-lab.com/announcing-virtual-try-on-with-fitlabs/"><link rel="alternate" type="application/atom+xml" href="https://blog.kris-lab.com/feed.xml"><link rel="alternate" type="application/json" href="https://blog.kris-lab.com/feed.json"><meta property="og:title" content="Future of AI driven Virtual Try-On"><meta property="og:image" content="https://blog.kris-lab.com/media/posts/904/cape-body-extraction-from-clothed-many-poses.png"><meta property="og:site_name" content="__Chris_Stasiak__"><meta property="og:description" content="Since the beginning of summer 2020, I'm involved in a pretty unique project in the area of the fashion industry. To be more specific, it's the technology for supporting the virtual try-on for both: online and offline shopping! You might&hellip;"><meta property="og:url" content="https://blog.kris-lab.com/announcing-virtual-try-on-with-fitlabs/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@_krislab"><meta name="twitter:title" content="Future of AI driven Virtual Try-On"><meta name="twitter:description" content="Since the beginning of summer 2020, I'm involved in a pretty unique project in the area of the fashion industry. To be more specific, it's the technology for supporting the virtual try-on for both: online and offline shopping! You might&hellip;"><meta name="twitter:image" content="https://blog.kris-lab.com/media/posts/904/cape-body-extraction-from-clothed-many-poses.png"><style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:var(--body-font);--logo-font:var(--body-font);--menu-font:var(--body-font)}</style><link rel="stylesheet" href="https://blog.kris-lab.com/assets/css/style.css?v=942a7248764f7bd78c8eab338e2f678a"><link rel="stylesheet" href="https://blog.kris-lab.com/assets/css/photoswipe.css?v=ffb247881cd6f611d007fd4a96b7b16a"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.kris-lab.com/announcing-virtual-try-on-with-fitlabs/"},"headline":"Future of AI driven Virtual Try-On","datePublished":"2020-10-22T12:18","dateModified":"2020-10-22T14:23","image":{"@type":"ImageObject","url":"https://blog.kris-lab.com/media/posts/904/cape-body-extraction-from-clothed-many-poses.png","height":1440,"width":1720},"description":"Since the beginning of summer 2020, I'm involved in a pretty unique project in the area of the fashion industry. To be more specific, it's the technology for supporting the virtual try-on for both: online and offline shopping! You might&hellip;","author":{"@type":"Person","name":"Chris Stasiak"},"publisher":{"@type":"Organization","name":"Chris Stasiak"}}</script><style>.pswp--svg .pswp__button,
				          .pswp--svg .pswp__button--arrow--left:before,
				          .pswp--svg .pswp__button--arrow--right:before {
					          background-image: url(https://blog.kris-lab.com/assets/svg/gallery-icons-light.svg);
			              }</style><script async src="https://www.googletagmanager.com/gtag/js?id=UA-176563351-1"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-176563351-1');</script></head><body><header class="header" id="js-header"><a href="https://blog.kris-lab.com/" class="logo">__Chris_Stasiak__</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li class="home-button"><a href="https://blog.kris-lab.com" target="_self">{ home }</a></li><li class="has-submenu"><a href="https://blog.kris-lab.com/" target="_self" aria-haspopup="true">#tagged</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://blog.kris-lab.com/tag/news/" target="_self">News</a></li><li><a href="https://blog.kris-lab.com/tag/devops-2/" target="_self">DevOps</a></li><li><a href="https://blog.kris-lab.com/tag/ffmpeg/" target="_self">Media</a></li><li><a href="https://blog.kris-lab.com/tag/vr/" target="_self">360/3D/VR</a></li><li><a href="https://blog.kris-lab.com/tag/artificial-intelligence-2/" target="_self">AI/ML/TPU</a></li><li><a href="https://blog.kris-lab.com/tag/tools/" target="_self">Tools</a></li></ul></li><li><a href="https://github.com/kris-lab" target="_blank">GitHub</a></li><li><a href="https://www.linkedin.com/in/krzysztof-chris-stasiak-6261244b/" target="_blank">LinkedIn</a></li><li><a href="https://keybase.io/krislab" target="_blank">Keybase</a></li><li class="has-submenu"><span class="is-separator" aria-haspopup="true">...</span><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://twitter.com/_krislab" target="_blank">Twitter</a></li><li><a href="https://www.vivino.com/users/krislab" target="_blank">Vivino</a></li><li><a href="https://you.23andme.com/published/reports/4ce9d90ae16a442590f1d3f8dcfd0eca/?share_id&#x3D;efcd35acba5a4f77" target="_blank">23andMe</a></li></ul></li><li class="line-vertical-separator"><span class="is-separator">|</span></li><li class="has-submenu"><a href="https://blog.kris-lab.com/contact/" target="_self" aria-haspopup="true">About</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://blog.kris-lab.com/contact/" target="_self">Contact</a></li><li><a href="https://blog.kris-lab.com/resume/" target="_self">Resume</a></li><li><a href="https://blog.kris-lab.com/references/" target="_self">References</a></li><li><a href="https://blog.kris-lab.com/gallery/" target="_self">Gallery</a></li><li class="line-horizontal-separator"><span class="is-separator">-</span></li><li><a href="https://blog.kris-lab.com/legal/" target="_self">Legal</a></li></ul></li></ul></nav><div class="search"><div class="search__overlay js-search-overlay"><form action="https://blog.kris-lab.com/search.html" class="search__form"><input class="search__input js-search-input" type="search" name="q" aria-label="Search input" placeholder="search..." autofocus="autofocus"> <button class="search__submit">Search</button></form></div><button class="search__btn js-search-btn" aria-label="Search"><svg role="presentation" focusable="false" height="18" width="18"><use xlink:href="https://blog.kris-lab.com/assets/svg/svg-map.svg#search"/></svg></button></div></header><main><div class="wrapper"><article class="post"><header class="post__header"><a href="https://blog.kris-lab.com/tag/artificial-intelligence-2/" class="post__maintag">artificial intelligence</a><h1 class="post__title">Future of AI driven Virtual Try-On</h1><div class="post__meta"><div class="post__author">By <a href="https://blog.kris-lab.com/authors/chris-stasiak/" class="invert" rel="author" title="Chris Stasiak">Chris Stasiak</a></div><time datetime="2020-10-22T12:18">October 22, 2020</time><div class="post__comments"><svg aria-hidden="true"><title>Comments</title><use xlink:href="https://blog.kris-lab.com/assets/svg/svg-map.svg#comments"/></svg> <a href="https://blog.kris-lab.com/announcing-virtual-try-on-with-fitlabs/#comments" data-disqus-identifier="904" class="invert" rel="nofollow">0</a></div></div></header><figure class="post__featured-image"><img src="https://blog.kris-lab.com/media/posts/904/cape-body-extraction-from-clothed-many-poses.png" srcset="https://blog.kris-lab.com/media/posts/904/responsive/cape-body-extraction-from-clothed-many-poses-xs.png 300w, https://blog.kris-lab.com/media/posts/904/responsive/cape-body-extraction-from-clothed-many-poses-sm.png 480w, https://blog.kris-lab.com/media/posts/904/responsive/cape-body-extraction-from-clothed-many-poses-md.png 768w, https://blog.kris-lab.com/media/posts/904/responsive/cape-body-extraction-from-clothed-many-poses-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="eager" height="1440" width="1720" alt=""></figure><div class="post__inner"><div class="post__entry"><p>Since the beginning of summer 2020, I'm involved in a pretty unique project in the area of the fashion industry. To be more specific, it's the technology for supporting the virtual try-on for both: online and offline shopping!</p><p><span data-preserver-spaces="true">You might find on the internet a lot of research around virtual fitting rooms, and also some early-stage solutions, but in reality, there is no usable product for consumers yet. All big players are chasing for technology which would re-shape the clothes purchase behaviors and increase the consumer experience, but in reality, it's a very complex problem.</span></p><hr><p><span data-preserver-spaces="true">These days most of the advanced research is focused on multiple topics</span></p><ul><li class="ql-indent-1"><strong><span data-preserver-spaces="true">Rendering</span></strong><ul><li class="ql-indent-1"><span data-preserver-spaces="true">3D human body - including the face, hands, feet, and including poses &amp; expressions</span></li><li class="ql-indent-1"><span data-preserver-spaces="true">3D human apparel features - extra layers on the body including clothes and accessories</span></li></ul></li><li class="ql-indent-1"><strong><span data-preserver-spaces="true">AI training and inference</span></strong><ul><li class="ql-indent-1"><span data-preserver-spaces="true">Recognition of human pose, expression, body dimensions using 2D/3D/4D signals (photos, 3D scans, </span><span data-preserver-spaces="true">volumetric capture)</span></li><li class="ql-indent-1"><span data-preserver-spaces="true">Learning from garments - extraction of 2D/3D/4D physical parameters and unifying into re-usable models</span></li><li class="ql-indent-1"><span data-preserver-spaces="true">Learning from human bodies - extraction of 2D/3D/4D physical parameters and unifying into re-usable models</span></li><li class="ql-indent-1"><span data-preserver-spaces="true">Estimation of user avatar - reconstruction of physical parameters and unifying model using as little data as possible (eg 1 photo)</span></li><li class="ql-indent-1"><span data-preserver-spaces="true">Estimation of virtual try-on look - estimation of 3D model of a 3D avatar wearing the 3D garment</span></li></ul></li><li><strong>Capturing</strong><ul><li>Hardware<ul><li>single stereo camera stream - it's achieved by high-quality image (CMOS) sensors OR infrared (IR) sensors OR laser (LiDAR) scanning OR light-field sensors. You can find great results using (cheap) Intel RealSense, StereoLabs, Azure cameras. As result, the camera produces a depth map and a point cloud of limited "FOV"</li><li>multi stereo camera stream - it's achieved by structured layout/mounting of stereo cameras around the object. All cameras are synchronized in time. As result, the system produces a complete depth map and a point cloud that can be transformed into a wireframe and then mesh.</li></ul></li><li>Tools<ul><li>Basic: stereo recording, point cloud stitching, wireframe, mesh, export</li><li>Advanced: calibration, point cloud noise reduction, GPU acceleration</li></ul></li></ul></li></ul><p>Even though the list is already long, this is just the tip of the mountain if you think about the practical implementation of such technology into the existing fashion retail chain.</p><hr><p><span data-preserver-spaces="true">In my opinion (Q3/2020), the most advanced research stack with the highest chance of adoption on the market is the achievement of Max Planck Institutes researchers. Of course, the impressive result is possible due to the previous work of a great group of researchers around the world.</span></p><p><span data-preserver-spaces="true">So, why the MPI seems a good fit? Well, the strategy of breaking the problem into multiple problems (4D scanning, 3D modeling, AI learning, AI inference, visualizations, rich tooling, great documentation) and close collaboration seems to be a good way to go.</span></p><p><span data-preserver-spaces="true">My finding regarding the MPI stack (it might still include some errors, but in general worked for me)</span></p><div class="gallery-wrapper"><div class="gallery" data-is-empty="false" data-columns="1"><figure class="gallery__item"><a href="https://blog.kris-lab.com/media/posts/904/gallery/fittings-mpi-stack.png" data-size="1720x1260"><img loading="lazy" src="https://blog.kris-lab.com/media/posts/904/gallery/fittings-mpi-stack-thumbnail.png" alt="" width="768" height="563"></a></figure></div></div><p>AI Research</p><ul><li><a href="https://cape.is.tue.mpg.de/">https://cape.is.tue.mpg.de/</a></li><li><a href="https://smpl.is.tue.mpg.de/">https://smpl.is.tue.mpg.de/</a></li><li><a href="http://smpl-x.is.tue.mpg.de/">http://smpl-x.is.tue.mpg.de/</a></li><li><a href="https://mano.is.tue.mpg.de/">https://mano.is.tue.mpg.de/</a></li><li><a href="http://smplify.is.tue.mpg.de/">http://smplify.is.tue.mpg.de/</a></li><li><a href="http://clothcap.is.tue.mpg.de/">http://clothcap.is.tue.mpg.de/</a></li></ul><p>Tools</p><ul><li><a href="https://github.com/QianliM/cape_utils">https://github.com/QianliM/cape_utils</a></li><li><a href="https://github.com/MPI-IS/mesh">https://github.com/MPI-IS/mesh</a></li></ul><hr><p><span style="color: var(--text-editor-body-color); font-family: var(--font-base); font-size: inherit; font-weight: var(--font-weight-normal);">I was able to succeed and download all resources, setup the environment, and run CAPE pipelines. However, all those tasks are not trivial and require a lot of computing power. I started my ecosystem on Jetson TX-1, but then quickly moved to Jetson Xavier AGX (30+ TFLOPS, 512 CUDA Volta core, 64 Tensor cores, 32GB RAM).</span></p><p>All screenshots in this blog post are taken from my environment.</p><hr><div class="gallery-wrapper"><div class="gallery" data-is-empty="false" data-columns="3"><figure class="gallery__item"><a href="https://blog.kris-lab.com/media/posts/904/gallery/cape-neural-output-obj-1.png" data-size="2266x1440"><img loading="lazy" src="https://blog.kris-lab.com/media/posts/904/gallery/cape-neural-output-obj-1-thumbnail.png" alt="" width="768" height="488"></a></figure><figure class="gallery__item"><a href="https://blog.kris-lab.com/media/posts/904/gallery/cape-tensorflow-graph-2020-06.png" data-size="1386x750"><img loading="lazy" src="https://blog.kris-lab.com/media/posts/904/gallery/cape-tensorflow-graph-2020-06-thumbnail.png" alt="" width="768" height="416"></a></figure><figure class="gallery__item"><a href="https://blog.kris-lab.com/media/posts/904/gallery/cape-neural-output-obj-2.png" data-size="2151x1440"><img loading="lazy" src="https://blog.kris-lab.com/media/posts/904/gallery/cape-neural-output-obj-2-thumbnail.png" alt="" width="768" height="514"></a></figure></div></div></div><footer><p class="post__last-updated">This article was updated on October 22, 2020</p><div class="post__tags-share"><ul class="post__tag"><li><a href="https://blog.kris-lab.com/tag/artificial-intelligence-2/">artificial intelligence</a></li><li><a href="https://blog.kris-lab.com/tag/cape/">CAPE</a></li><li><a href="https://blog.kris-lab.com/tag/clothcap/">ClothCap</a></li><li><a href="https://blog.kris-lab.com/tag/fashion/">fashion</a></li><li><a href="https://blog.kris-lab.com/tag/fitting-room/">fitting-room</a></li><li><a href="https://blog.kris-lab.com/tag/gpu/">GPU</a></li><li><a href="https://blog.kris-lab.com/tag/jetson-tx1/">Jetson TX1</a></li><li><a href="https://blog.kris-lab.com/tag/jetson-xavier-agx/">jetson-xavier-agx</a></li><li><a href="https://blog.kris-lab.com/tag/machine-learning/">machine learning</a></li><li><a href="https://blog.kris-lab.com/tag/mano/">MANO</a></li><li><a href="https://blog.kris-lab.com/tag/max-planck-institutes/">Max Planck Institutes</a></li><li><a href="https://blog.kris-lab.com/tag/mpi/">MPI</a></li><li><a href="https://blog.kris-lab.com/tag/smpl/">SMPL</a></li><li><a href="https://blog.kris-lab.com/tag/smplx/">SMPLX</a></li><li><a href="https://blog.kris-lab.com/tag/tensor/">tensor</a></li><li><a href="https://blog.kris-lab.com/tag/tx1/">TX1</a></li><li><a href="https://blog.kris-lab.com/tag/virtual-fitting-room/">virtual-fitting-room</a></li><li><a href="https://blog.kris-lab.com/tag/virtual-try-on/">virtual-try-on</a></li></ul><aside class="post__share"><a href="https://twitter.com/share?url=https%3A%2F%2Fblog.kris-lab.com%2Fannouncing-virtual-try-on-with-fitlabs%2F&amp;via=%40_krislab&amp;text=Future%20of%20AI%20driven%20Virtual%20Try-On" class="js-share twitter" aria-label="Share with Twitter" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://blog.kris-lab.com/assets/svg/svg-map.svg#twitter"/></svg> </a><a href="https://pinterest.com/pin/create/button/?url=https%3A%2F%2Fblog.kris-lab.com%2Fannouncing-virtual-try-on-with-fitlabs%2F&amp;media=https%3A%2F%2Fblog.kris-lab.com%2Fmedia%2Fposts%2F904%2Fcape-body-extraction-from-clothed-many-poses.png&amp;description=Future%20of%20AI%20driven%20Virtual%20Try-On" class="js-share pinterest" aria-label="Share with Pinterest" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://blog.kris-lab.com/assets/svg/svg-map.svg#pinterest"/></svg> </a><a href="http://www.linkedin.com/shareArticle?url=https%3A%2F%2Fblog.kris-lab.com%2Fannouncing-virtual-try-on-with-fitlabs%2F&amp;title=Future%20of%20AI%20driven%20Virtual%20Try-On" class="js-share linkedin" aria-label="Share with LinkedIn" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://blog.kris-lab.com/assets/svg/svg-map.svg#linkedin"/></svg> </a><a href="https://buffer.com/add?text=Future%20of%20AI%20driven%20Virtual%20Try-On&amp;url=https%3A%2F%2Fblog.kris-lab.com%2Fannouncing-virtual-try-on-with-fitlabs%2F" class="js-share buffer" aria-label="Share with Buffer" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://blog.kris-lab.com/assets/svg/svg-map.svg#buffer"/></svg> </a><a href="https://api.whatsapp.com/send?text=Future%20of%20AI%20driven%20Virtual%20Try-On https%3A%2F%2Fblog.kris-lab.com%2Fannouncing-virtual-try-on-with-fitlabs%2F" class="js-share whatsapp" aria-label="Share with WhatsApp" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://blog.kris-lab.com/assets/svg/svg-map.svg#whatsapp"/></svg></a></aside></div><div class="post__bio author"><div><h3 class="h6 author__name"><a href="https://blog.kris-lab.com/authors/chris-stasiak/" class="invert" title="Chris Stasiak">Chris Stasiak</a></h3></div></div><nav class="post__nav"><div class="post__nav__prev"><a class="post__nav__link" href="https://blog.kris-lab.com/coral-tpu-quick-test/" rel="prev">Previous Post<h3 class="h6">Coral TPU Edge with Mendel</h3></a></div></nav></footer></div></article><div class="comments post__inner" id="comments"><h3 class="h5">Comments</h3><div id="disqus_thread"></div><script>var disqus_config = function () {
                    this.page.url = '';
            		this.page.identifier = '';
                };
            
                var disqus_loaded = false;
            
                function publiiLoadDisqus() {
                    if(disqus_loaded) {
                        return false;
                    }
            
                    var top = document.getElementById('disqus_thread').offsetTop;
            
                    if (!disqus_loaded && (window.scrollY || window.pageYOffset) + window.innerHeight > top) {
                        disqus_loaded = true;
            
                        (function () {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://blog-kris-lab-com.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    }
                }
            
                publiiLoadDisqus();
            
                window.onscroll = function() {
                    publiiLoadDisqus();
                };</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div></div><div class="post__related"><div class="wrapper"><h2 class="h5">Related posts</h2><div class="l-grid l-grid--4"><article class="c-card"><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="https://blog.kris-lab.com/tag/adaptive-brain/">adaptive brain</a></div><h3 class="c-card__title"><a href="https://blog.kris-lab.com/private-virtual-personality-14/" class="invert">Private Virtual Personality</a></h3></header><p class="c-card__text">THIS PROJECT IS ON HOLD DUE TO 3D/VR RELATED PROJECTS I WORK PROFESSIONALLY FOR FULL TIME AND ALSO DUE TO MY PRIVATE VR ACTIVITY. THE LATES SOURCE CODE YOU CAN FIND ON GITHUB. I am on the heavyÂ development of super&hellip;</p><footer class="c-card__meta"><time datetime="2015-06-24T18:00">June 24, 2015</time><div class="c-card__comments"><svg aria-hidden="true"><title>Comments</title><use xlink:href="https://blog.kris-lab.com/assets/svg/svg-map.svg#comments"/></svg> <a href="https://blog.kris-lab.com/private-virtual-personality-14/#post-comments" data-disqus-identifier="868" class="invert" rel="nofollow">0</a></div></footer></div></article></div></div></div></main><footer class="footer"><div class="footer__social"><a href="https://twitter.com/_krislab" aria-label="Twitter" class="twitter"><svg><use xlink:href="https://blog.kris-lab.com/assets/svg/svg-map.svg#twitter"/></svg> </a><a href="https://www.instagram.com/_krislab" aria-label="Instagram" class="instagram"><svg><use xlink:href="https://blog.kris-lab.com/assets/svg/svg-map.svg#instagram"/></svg> </a><a href="https://www.linkedin.com/in/krzysztof-chris-stasiak-6261244b/" aria-label="LinkedIn" class="linkedin"><svg><use xlink:href="https://blog.kris-lab.com/assets/svg/svg-map.svg#linkedin"/></svg></a></div><div class="footer__copyright">&copy; 2020 Krzysztof Stasiak</div></footer><script>window.publiiThemeMenuConfig = {    
      mobileMenuMode: 'sidebar',
      animationSpeed: 300,
      submenuWidth: 'auto',
      doubleClickTime: 500,
      mobileMenuExpandableSubmenus: true, 
      relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://blog.kris-lab.com/assets/js/scripts.min.js?v=8b3e67b51e8c7a7d51b33f4a94ae4287"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script><script defer="defer" src="https://blog.kris-lab.com/assets/js/photoswipe.min.js?v=017385b552f7e0d979e2e2fe6f324015"></script><script defer="defer" src="https://blog.kris-lab.com/assets/js/photoswipe-ui-default.min.js?v=d067f0883540b1ddda0e2c9ad1b14260"></script><script>var initPhotoSwipeFromDOM=function(gallerySelector){var parseThumbnailElements=function(el){var thumbElements=el.childNodes,numNodes=thumbElements.length,items=[],figureEl,linkEl,size,item;for(var i=0;i<numNodes;i++){figureEl=thumbElements[i];if(figureEl.nodeType!==1){continue;}
          linkEl=figureEl.children[0];size=linkEl.getAttribute('data-size').split('x');item={src:linkEl.getAttribute('href'),w:parseInt(size[0],10),h:parseInt(size[1],10)};if(figureEl.children.length>1){item.title=figureEl.children[1].innerHTML;}
          if(linkEl.children.length>0){item.msrc=linkEl.children[0].getAttribute('src');}
          item.el=figureEl;items.push(item);}
          return items;};var closest=function closest(el,fn){return el&&(fn(el)?el:closest(el.parentNode,fn));};var onThumbnailsClick=function(e){e=e||window.event;e.preventDefault?e.preventDefault():e.returnValue=false;var eTarget=e.target||e.srcElement;var clickedListItem=closest(eTarget,function(el){return(el.tagName&&el.tagName.toUpperCase()==='FIGURE');});if(!clickedListItem){return;}
          var clickedGallery=clickedListItem.parentNode,childNodes=clickedListItem.parentNode.childNodes,numChildNodes=childNodes.length,nodeIndex=0,index;for(var i=0;i<numChildNodes;i++){if(childNodes[i].nodeType!==1){continue;}
          if(childNodes[i]===clickedListItem){index=nodeIndex;break;}
          nodeIndex++;}
          if(index>=0){openPhotoSwipe(index,clickedGallery);}
          return false;};var photoswipeParseHash=function(){var hash=window.location.hash.substring(1),params={};if(hash.length<5){return params;}
          var vars=hash.split('&');for(var i=0;i<vars.length;i++){if(!vars[i]){continue;}
          var pair=vars[i].split('=');if(pair.length<2){continue;}
          params[pair[0]]=pair[1];}
          if(params.gid){params.gid=parseInt(params.gid,10);}
          return params;};var openPhotoSwipe=function(index,galleryElement,disableAnimation,fromURL){var pswpElement=document.querySelectorAll('.pswp')[0],gallery,options,items;items=parseThumbnailElements(galleryElement);options={galleryUID:galleryElement.getAttribute('data-pswp-uid'),getThumbBoundsFn:function(index){var thumbnail=items[index].el.getElementsByTagName('img')[0],pageYScroll=window.pageYOffset||document.documentElement.scrollTop,rect=thumbnail.getBoundingClientRect();return{x:rect.left,y:rect.top+pageYScroll,w:rect.width};},
          mainClass:'pswp--dark',
          preload: [1,2],
          hideAnimationDuration:200,
          showAnimationDuration:0,
          bgOpacity: 0.7,
          showHideOpacity:true,
          closeOnScroll: true,
          arrowKeys: true,
          closeEl: true,
          captionEl: true,
          fullscreenEl: true,
          zoomEl: true,
          shareEl: true,
          counterEl: true,
          arrowEl: true,
          preloaderEl: true
          };if(fromURL){if(options.galleryPIDs){for(var j=0;j<items.length;j++){if(items[j].pid==index){options.index=j;break;}}}else{options.index=parseInt(index,10)-1;}}else{options.index=parseInt(index,10);}
          if(isNaN(options.index)){return;}
          if(disableAnimation){options.showAnimationDuration=0;}
          gallery=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,options);gallery.init();gallery.options.escKey=true;};var galleryElements=document.querySelectorAll(gallerySelector);for(var i=0,l=galleryElements.length;i<l;i++){galleryElements[i].setAttribute('data-pswp-uid',i+1);galleryElements[i].onclick=onThumbnailsClick;}
          var hashData=photoswipeParseHash();if(hashData.pid&&hashData.gid){openPhotoSwipe(hashData.pid,galleryElements[hashData.gid-1],true,true);}};initPhotoSwipeFromDOM('.gallery');</script><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button><button class="pswp__button pswp__button--share" title="Share"></button><button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button><button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button><button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><script id="dsq-count-scr" src="https://blog-kris-lab-com.disqus.com/count.js" async></script></body></html>